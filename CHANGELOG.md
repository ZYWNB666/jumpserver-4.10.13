# ğŸ‰ GitHub Actions é…ç½®ç²¾ç®€å®Œæˆ

## ğŸ“‹ æ”¹åŠ¨æ€»ç»“

### âœ… å·²å®Œæˆçš„å·¥ä½œ

1. **åˆ›å»ºäº†æ–°çš„æ„å»º workflow**
   - `.github/workflows/build-and-push.yml`
   - ä¸“æ³¨äº Docker é•œåƒæ„å»ºå’Œæ¨é€
   - æ”¯æŒè‡ªåŠ¨å’Œæ‰‹åŠ¨è§¦å‘
   - ç”Ÿæˆç¬¦åˆè¦æ±‚çš„é•œåƒæ ‡ç­¾æ ¼å¼

2. **åˆ é™¤äº†ä¸å¿…è¦çš„æ–‡ä»¶**
   - åˆ é™¤äº† 17 ä¸ªä¸ç›¸å…³çš„ workflow æ–‡ä»¶
   - åˆ é™¤äº† PR æ¨¡æ¿ã€Release é…ç½®ç­‰
   - åªä¿ç•™äº†æ„å»ºç›¸å…³çš„é…ç½®

3. **åˆ›å»ºäº†é…ç½®æ–‡æ¡£**
   - `.github/README.md` - å®Œæ•´ä½¿ç”¨æ–‡æ¡£
   - `.github/SETUP_GUIDE.md` - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
   - `CHANGELOG.md` - æœ¬æ–‡ä»¶

4. **åˆ›å»ºäº†æµ‹è¯•è„šæœ¬**
   - `test-build.sh` - Linux/Mac æµ‹è¯•è„šæœ¬
   - `test-build.bat` - Windows æµ‹è¯•è„šæœ¬

### ğŸ“‚ æœ€ç»ˆç›®å½•ç»“æ„

```
.github/
â”œâ”€â”€ workflows/
â”‚   â””â”€â”€ build-and-push.yml      â† å”¯ä¸€ä¿ç•™çš„ workflow
â”œâ”€â”€ ISSUE_TEMPLATE/             â† Issue æ¨¡æ¿ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ README.md                   â† å®Œæ•´æ–‡æ¡£
â””â”€â”€ SETUP_GUIDE.md             â† å¿«é€ŸæŒ‡å—
```

## ğŸ³ Docker é•œåƒæ ¼å¼

### ç”Ÿæˆçš„é•œåƒæ ‡ç­¾

```
registry.cn-shanghai.aliyuncs.com/zywdockers/images:jmp-core-YYYYMMDDHHmm
registry.cn-shanghai.aliyuncs.com/zywdockers/images:jmp-core-latest
```

### ç¤ºä¾‹

```bash
# æ—¶é—´æˆ³ç‰ˆæœ¬
registry.cn-shanghai.aliyuncs.com/zywdockers/images:jmp-core-202512052106

# Latest ç‰ˆæœ¬
registry.cn-shanghai.aliyuncs.com/zywdockers/images:jmp-core-latest
```

## ğŸš€ ä½¿ç”¨å‰å‡†å¤‡

### 1. é…ç½® GitHub Secrets

åœ¨ä»“åº“çš„ **Settings â†’ Secrets and variables â†’ Actions** ä¸­æ·»åŠ ï¼š

```
ALIYUN_USERNAME = ä½ çš„é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ç”¨æˆ·å
ALIYUN_PASSWORD = ä½ çš„é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡å¯†ç 
```

### 2. è·å–é˜¿é‡Œäº‘å‡­è¯

1. è®¿é—® https://cr.console.aliyun.com/
2. è¿›å…¥ **ä¸ªäººå®ä¾‹** â†’ **è®¿é—®å‡­è¯**
3. è®¾ç½®æˆ–æŸ¥çœ‹å›ºå®šå¯†ç 

### 3. ç¡®ä¿é•œåƒä»“åº“å­˜åœ¨

åœ¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ä¸­åˆ›å»ºï¼š
- å‘½åç©ºé—´: `zywdockers`
- ä»“åº“å: `images`
- å¯è§æ€§: ç§æœ‰

## ğŸ“ è§¦å‘æ„å»ºçš„æ–¹å¼

### æ–¹å¼ä¸€ï¼šæ¨é€ä»£ç ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰

```bash
git add .
git commit -m "feat: update code"
git push origin main
```

### æ–¹å¼äºŒï¼šæ¨é€æ ‡ç­¾ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰

```bash
git tag v4.10.13-custom
git push origin v4.10.13-custom
```

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨è§¦å‘

1. è®¿é—® GitHub ä»“åº“çš„ Actions é¡µé¢
2. é€‰æ‹© "Build and Push JumpServer Image"
3. ç‚¹å‡» "Run workflow"
4. ï¼ˆå¯é€‰ï¼‰è¾“å…¥è‡ªå®šä¹‰æ ‡ç­¾åç¼€
5. ç‚¹å‡»ç»¿è‰²çš„ "Run workflow" æŒ‰é’®

## ğŸ§ª æœ¬åœ°æµ‹è¯•

åœ¨æ¨é€åˆ° GitHub ä¹‹å‰ï¼Œå¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•æ„å»ºï¼š

### Linux/Mac
```bash
chmod +x test-build.sh
./test-build.sh
```

### Windows
```cmd
test-build.bat
```

æµ‹è¯•è„šæœ¬ä¼šï¼š
1. âœ… æ„å»º Docker é•œåƒ
2. âœ… æ£€æŸ¥é•œåƒå¤§å°
3. âœ… å¯åŠ¨æµ‹è¯•å®¹å™¨
4. âœ… æ˜¾ç¤ºå®¹å™¨æ—¥å¿—
5. âœ… å¯é€‰æ¨é€åˆ°é˜¿é‡Œäº‘

## ğŸ“Š æ„å»ºäº§ç‰©

æ¯æ¬¡æ„å»ºä¼šç”Ÿæˆä»¥ä¸‹äº§ç‰©ï¼š

| äº§ç‰© | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| æ—¶é—´æˆ³é•œåƒ | å¸¦æ—¶é—´æˆ³çš„ç‰ˆæœ¬ï¼Œç”¨äºå›æº¯ | `jmp-core-202512052106` |
| Latest é•œåƒ | å§‹ç»ˆæŒ‡å‘æœ€æ–°ç‰ˆæœ¬ | `jmp-core-latest` |
| æ„å»ºç¼“å­˜ | åŠ é€Ÿåç»­æ„å»º | `jmp-core-buildcache` |

## ğŸ” æŸ¥çœ‹æ„å»ºçŠ¶æ€

è®¿é—® GitHub Actions é¡µé¢ï¼š
```
https://github.com/ä½ çš„ç”¨æˆ·å/jumpserver-4.10.13/actions
```

## ğŸ’¡ é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰æ ‡ç­¾åç¼€

æ‰‹åŠ¨è§¦å‘æ—¶å¯ä»¥æ·»åŠ è‡ªå®šä¹‰åç¼€ï¼š

```
è¾“å…¥åç¼€: beta
ç”Ÿæˆæ ‡ç­¾: jmp-core-202512052106-beta
```

### æŸ¥çœ‹æ„å»ºæ‘˜è¦

æ¯æ¬¡æ„å»ºå®Œæˆåï¼Œåœ¨ Actions é¡µé¢å¯ä»¥çœ‹åˆ°ï¼š
- âœ… å®Œæ•´çš„é•œåƒåç§°
- âœ… Pull å‘½ä»¤
- âœ… æ„å»ºæ—¶é—´å’ŒçŠ¶æ€

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- `.github/README.md` - å®Œæ•´ä½¿ç”¨æ–‡æ¡£
- `.github/SETUP_GUIDE.md` - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- `.github/workflows/build-and-push.yml` - Workflow é…ç½®æ–‡ä»¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨å¿…é¡»é…ç½® Secrets**
   - æ²¡æœ‰é…ç½®ä¼šå¯¼è‡´æ„å»ºå¤±è´¥

2. **ç¡®ä¿é˜¿é‡Œäº‘ä»“åº“å·²åˆ›å»º**
   - æ¨é€å‰éœ€è¦å…ˆåˆ›å»ºé•œåƒä»“åº“

3. **æ—¶é—´æˆ³åŸºäº UTC+8**
   - ä½¿ç”¨çš„æ˜¯åŒ—äº¬æ—¶é—´ï¼ˆä¸­å›½æ ‡å‡†æ—¶é—´ï¼‰

4. **æ„å»ºç¼“å­˜ä¼šå ç”¨ç©ºé—´**
   - å¯ä»¥å®šæœŸæ¸…ç†ä¸éœ€è¦çš„é•œåƒ

5. **åªæ”¯æŒ linux/amd64**
   - å¦‚éœ€ ARM æ”¯æŒï¼Œä¿®æ”¹ workflow çš„ platforms å‚æ•°

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… é…ç½® GitHub Secrets
2. âœ… æ¨é€ä»£ç æˆ–æ ‡ç­¾è§¦å‘æ„å»º
3. âœ… åœ¨ Actions é¡µé¢æŸ¥çœ‹æ„å»ºè¿›åº¦
4. âœ… æ„å»ºå®Œæˆåæ‹‰å–é•œåƒæµ‹è¯•

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥ Actions é¡µé¢çš„æ„å»ºæ—¥å¿—
2. éªŒè¯ Secrets é…ç½®æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤é˜¿é‡Œäº‘é•œåƒä»“åº“æƒé™

---

**æ„å»ºé…ç½®å®Œæˆï¼ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼** ğŸš€

